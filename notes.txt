mkdir nf_hd_rnaseq
cd nf_hd_rnaseq
mkdir data
cd data
#download the fastq files into a folder named data.
cd ..
cd ..
#should to be in dir that contain nf_hd_rnaseq
#download docker
#run to get docker  - 17.14
sudo docker run -v $(pwd)/nf_hd_rnaseq:/home/nf_hd_rnaseq -it jackkelly75/nf_hd_rnaseq
#time taken - <4 mins ; size -  3.25GB
cd nf_hd_rnaseq

mkdir 1_FastqPuri
FILES=/home/nf_hd_rnaseq/data/*_1.fastq.gz
for fn in $FILES;
do
	echo "Processing sample $fn"
	a=$(echo ${fn} | sed -e 's/_1/_2/')
	ln=${fn##*/}
	v2=${ln::-10}
	trimFilterPE -f $fn:$a -l 101 --trimQ ENDSFRAC --trimN ENDS -m 31 -o ./1_FastqPuri/${v2}
	#-m is minumum read length to keep. 
done





sudo docker build -t "xyz:Dockerfile" .
#once docker image is created
#login to docker
sudo docker login --username=jackkelly75
sudo docker images
#remove all docker images
#docker system prune -a --volumes
#will show the dockers created. Inset IMAGE ID into image_id
sudo docker tag <image_id> jackkelly75/nf_hd_rnaseq:latest
sudo docker push jackkelly75/nf_hd_rnaseq
sudo docker run -it jackkelly75/nf_hd_rnaseq

#can also use volume (-v) to run docker and specify files to use
#before the : specify where on PC the folder you want in the docker is, after it where in the docker it should be placed
sudo docker run -v /media/j/Home_HardDrive_1/PhD_work/3.HD_work/Brain/BA9/data1:/home/data -it jackkelly75/nf_hd_rnaseq


#delete all docker images
#docker system prune -a --volumes


./nextflow pull jackkelly75/NF_HD_RNAseq

sudo ./nextflow run jackkelly75/NF_HD_RNAseq --reads 'data2/*_{1,2}.fastq.gz' --transcriptome 'data2/hsapien.fa.gz'

#in temp folder of hard drive 2
sudo ./nextflow run jackkelly75/NF_HD_RNAseq --reads '/media/j/Home_HardDrive_1/PhD_work/3.HD_work/Brain/BA9/data/*_{1,2}.fastq.gz' --transcriptome 'data/hsapien.fa.gz' -resume




sudo ./nextflow pull jackkelly75/NF_HD_RNAseq
sudo ./nextflow run jackkelly75/NF_HD_RNAseq --reads '/media/j/Home_HardDrive_1/PhD work/3.HD work/Brain/BA9/data/*_{1,2}.fastq.gz' --transcriptome 'data/hsapien.fa.gz'



sudo ./nextflow run jackkelly75/NF_HD_RNAseq --reads '/media/j/Home_HardDrive_1/PhD_work/3.HD_work/Brain/BA9/data1/*_{1,2}.fastq.gz' --transcriptome 'data/hsapien.fa.gz' --files '/media/j/Home_HardDrive_1/PhD_work/3.HD_work/Brain/BA9/data1/*_1.fastq.gz'

