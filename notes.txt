#########
#   1   #
#########
####################################################
#                                                  #
#  download the files needed and convert to fastq  #
#                                                  #
####################################################
#in BASH     #
##############
#download the SRR_Acc_List.txt from the SRA page for RNA-seq (https://www.ncbi.nlm.nih.gov/Traces/study/?acc=PRJNA271929)

sed -i  's/^/fastq-dump --outdir fastq --gzip --skip-technical  --readids --read-filter pass --dumpbase --split-3 --clip /' SRR_Acc_List.txt
#add "#!/bin/sh" to top of the file as will use as shell script
#then run this in terminal to make the file readable by shell
chmod +x SRR_Acc_List.txt
./SRR_Acc_List.txt
#this batch downloads the RNA-seq file



https://www.biostars.org/p/325010/
export PATH=$HOME/.aspera/connect/bin:$PATH





sudo docker build -t "xyz:Dockerfile" .
#once docker image is created
#login to docker
sudo docker login --username=jackkelly75
sudo docker images
#remove all docker images
#docker system prune -a --volumes
#will show the dockers created. Inset IMAGE ID into image_id
sudo docker tag <image_id> jackkelly75/nf_hd_rnaseq:latest
sudo docker push jackkelly75/nf_hd_rnaseq
sudo docker run -it jackkelly75/nf_hd_rnaseq

#can also use volume (-v) to run docker and specify files to use
#before the : specify where on PC the folder you want in the docker is, after it where in the docker it should be placed
sudo docker run -v /media/j/Home_HardDrive_1/PhD_work/3.HD_work/Brain/BA9/data1:/home/data -it jackkelly75/nf_hd_rnaseq


#delete all docker images
#docker system prune -a --volumes


./nextflow pull jackkelly75/NF_HD_RNAseq

sudo ./nextflow run jackkelly75/NF_HD_RNAseq --reads 'data2/*_{1,2}.fastq.gz' --transcriptome 'data2/hsapien.fa.gz'

#in temp folder of hard drive 2
sudo ./nextflow run jackkelly75/NF_HD_RNAseq --reads '/media/j/Home_HardDrive_1/PhD_work/3.HD_work/Brain/BA9/data/*_{1,2}.fastq.gz' --transcriptome 'data/hsapien.fa.gz' -resume






sudo ./nextflow pull jackkelly75/NF_HD_RNAseq
sudo ./nextflow run jackkelly75/NF_HD_RNAseq/real.nf --reads '/media/j/Home_HardDrive_1/PhD_work/3.HD_work/Brain/BA9/data1/*_{1,2}.fastq.gz'






